<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorate="~{layout}">

<head>
    <meta charset="UTF-8">
    <title>Enter Tender Details</title>
    <!-- Include Bootstrap CSS for layout -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

    <style>
        .form-group {
            margin-bottom: 1.5rem; /* Additional space between rows */
        }

<!--        /* Initially hide all form rows */-->
<!--        .form-row {-->
<!--            display: none;-->
<!--        }-->
    </style>
</head>
<body layout:fragment="content">
<div class="container">
    <h2 class="mt-5">Enter Tender Details</h2>
    <form action="#" th:action="@{/saveTenderNew}" method="post" th:object="${user}" class="p-3" enctype="multipart/form-data">

        <div>  <input type="hidden"  th:value="${user.userId}"  id="userId" name="userId"  ></div>


        <div class="row mb-2"  th:object="${commonParameter}">
            <div>
                <input type="date" style="display:none" id="gdate" th:value="${commonParameter.g_Date}" class="form-control" readonly />
            </div>

        </div>
        <!-- Eligibility and Search Date -->
        <div class="form-row mb-3 ">
            <div class="form-group col-md-5" id="eligibilityRow" >
                <label for="eligibility">Eligibility:</label>
                <select id="eligibility" name="eligibility"  class="form-control">
                    <option value="1">Eligible</option>
                    <option value="0">Not Eligible</option>
                </select>
            </div>
            <!-- Search Date -->
            <div class="form-group col-md-5 ml-auto" id="searchDateRow">
                <label for="searchDate">Search Date:</label>
                <input type="date" onblur="isValidDateFormat(this.id)" class="form-control" maxlength="15" id="searchDate" name="searchDate">
            </div>
        </div>

        <!-- Bid Publish Date and Submission Date and Time -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="bidPublishDateRow">
                <label for="bidPublishDate">Bid Publish Date:</label>
                <input type="date" onblur="isValidDateFormat(this.id)" class="form-control" maxlength="15"   id="bidPublishDate" name="bidPublishDate">
            </div>
            <div class="form-group col-md-5 ml-auto" id="submissionDateRow">
                <label for="submissionDate">Submission Date </label>
                <input type="date" onblur="isValidDateFormat(this.id)" class="form-control" maxlength="15"  id="submissionDate" name="submissionDate" onchange="updateParticipatingMonth()">
            </div>
        </div>

        <!-- Bid Publish Date and Submission Date and Time -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5 " id="submissionTimeRow">
                <label for="submissionTime">Submission Time </label>
                <input type="time" class="form-control" maxlength="15"  id="submissionTime" name="submissionTime" onchange="updateParticipatingMonth()">
            </div>
            <div class="form-group col-md-5 ml-auto" id="extendedDateRow">
                <label for="extendedDate">Extended Date:</label>
                <input type="date" maxlength="15"  class="form-control" id="extendedDate" name="extendedDate">
            </div>
        </div>

        <!-- Extended Date & Time and Participating Month -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="extendedTimeRow">
                <label for="extendedTime">Extended Time:</label>
                <input type="time" maxlength="15"  class="form-control" id="extendedTime" name="extendedTime">
            </div>

            <div class="form-group col-md-5 ml-auto" id="participatingMonthRow">
                <label for="participatingMonth">Participating Month:</label>
                <select class="form-control"  id="participatingMonth" name="participatingMonth" disabled="true">
                    <option value="">Select Month</option>
                    <option th:each="month : ${months}" th:value="${month}" th:text="${month}">Month</option>
                </select>
            </div>
        </div>

        <!-- Extended Date & Time and Participating Month -->
        <div class="form-row mb-3" >

        </div>

        <!-- Submission Type and Bid Validity -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="submissionTypeRow">
                <label for="submissionType">Submission Type:</label>
                <select id="submissionType" name="submissionType" class="form-control">
                    <option value="">Select Submission Type</option>
                    <option value="1">Offline</option>
                    <option value="2">Online</option>
                    <option value="3">Online and Offline</option>
                </select>
            </div>
            <div class="form-group col-md-5 ml-auto" id="bidValidityRow">
                <label for="bidValidity">Bid Validity:</label>
                <input type="date" onblur="isValidDateFormat(this.id)" class="form-control" maxlength="15"  id="bidValidity" name="bidValidity">
            </div>
        </div>

        <!-- MSE Preference and Tender Source -->
        <div class="form-row mb-3">
            <div class="form-group col-md-5"  id="msePreferenceRow">
                <label for="msePreference">MSE Preference:</label>
                <select id="msePreference" name="msePreference" class="form-control">
                    <option value="">Select</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
            </div>
            <div class="form-group col-md-5 ml-auto" id="tenderSourceRow">
                <label for="tenderSource">Tender Source:</label>
                <select id="tenderSource" name="tenderSource" class="form-control">
                    <option value="">Select</option>
                    <option th:each="option : ${tenderSourceOptions}"
                            th:value="${option.id}"
                            th:text="${option.name}">
                    </option>
                </select>
            </div>
        </div>

        <!-- Tender Reference No and Organization -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="tenderReferenceNumberRow">
                <label for="tenderReferenceNumber">Tender Reference No:</label>
                <input type="text" class="form-control" maxlength="15"  id="tenderReferenceNumber" name="tenderReferenceNumber">
            </div>
            <div class="form-group col-md-5 ml-auto" id="organizationRow">
                <label for="organization">Organization:</label>
                <select id="organization" name="organization" class="form-control">
                    <option value="">Select</option>
                    <option value="Railway">Railway</option>
                    <option value="other">other</option>
                </select>
            </div>
        </div>

        <!-- Sector and Zone -->
        <div class="form-row mb-3">
            <div class="form-group col-md-5" id="sectorRow">
                <label for="sector">Sector:</label>
                <div class="input-group">
                <input type="text" maxlength="15"  class="form-control" id="sector" name="sector" title="Please enter your master">
                <div class="input-group-prepend">
                        <span class="input-group-text">
                            <i class="fa-solid fa-briefcase"></i>
                        </span>
                    </div>
                 </div>
                </div>
            <div class="form-group col-md-5 ml-auto" id="zoneRow">
                <label for="zone">Zone:</label>
                <div class="input-group">
                <input type="text" maxlength="15"  class="form-control" id="zone" name="zone" title="Please enter your master">
                    <div class="input-group-prepend">
                        <span class="input-group-text">
                            <i class="fa-solid fa-briefcase"></i>
                        </span>
                    </div>
                </div>
                </div>
                <input type="hidden" class="form-control" id="zone_id" name="zone_id">
            </div>

        <!-- Division and Department -->
        <div class="form-row mb-3">
            <div class="form-group col-md-5" id="divisionRow">
                <label for="division">Division:</label>
                <div class="input-group">
                    <input type="text" maxlength="15" class="form-control" id="division" name="division" title="Please enter your master">
                    <div class="input-group-prepend">
                <span class="input-group-text">
                    <i class="fa-solid fa-briefcase"></i>
                </span>
                    </div>
                </div>
                <input type="hidden" class="form-control" id="division_id" name="division_id">
            </div>

            <div class="form-group col-md-5 ml-auto" id="departmentRow">
                <label for="department">Department:</label>
                <div class="input-group">
                <input type="text" maxlength="15"  class="form-control" id="department" name="department" title="Please enter your master">
                <div class="input-group-prepend">
                        <span class="input-group-text">
                            <i class="fa-solid fa-briefcase"></i>
                        </span>
                </div>
                    </div>
                <input type="hidden" class="form-control" id="department_id" name="department_id">
            </div>
        </div>

        <!-- Client Name and Client Location -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="clientNameRow">
                <label for="clientName">Client Name:</label>
                <div class="input-group">
                <input type="text" maxlength="15"  class="form-control" id="clientName" name="clientName" title="Please enter your master">
                <div class="input-group-prepend">
                        <span class="input-group-text">
                            <i class="fa-solid fa-briefcase"></i>
                        </span>
                </div>
                </div>
                <input type="hidden" class="form-control" id="clientName_id" name="clientName_id">
            </div>
            <div class="form-group col-md-5 ml-auto" id="clientLocationRow">
                <label for="clientLocation">Client Location:</label>
                <input type="text" maxlength="15"  class="form-control" id="clientLocation" name="clientLocation">
            </div>
        </div>

        <!-- Client Address and State -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="clientAddressRow">
                <label for="clientAddress">Client Address:</label>
                <input type="text" maxlength="15"  class="form-control" id="clientAddress" name="clientAddress">
            </div>
            <div class="form-group col-md-5 ml-auto" id="stateRow">
                <label for="state">State:</label>
                <input type="text" maxlength="15"  class="form-control" id="state" name="state" title="Please enter your master">
                <input type="hidden" class="form-control" id="state_id" name="state_id">

            </div>
        </div>

        <!-- Operational Branch and Scope of Work -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="operationalBranchRow">
                <label for="operationalBranch">Operational Branch:</label>
                <div class="input-group">

                <input type="text" maxlength="15"  class="form-control" id="operationalBranch" name="operationalBranch" title="Please enter your master">
                <div class="input-group-prepend">
                        <span class="input-group-text">
                            <i class="fa-solid fa-briefcase"></i>
                        </span>
                      </div>
                    </div>
                <input type="hidden" class="form-control" id="operationalBranch_id" name="operationalBranch_id">
            </div>
            <div class="form-group col-md-5 ml-auto" id="scopeOfWorkRow">
                <label for="scopeOfWork">Scope of Work:</label>
                <input type="text" maxlength="15"  class="form-control" id="scopeOfWork" name="scopeOfWork">
            </div>
        </div>

        <!-- Nature of Work and Similar Nature -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="natureOfWorkRow">
                <label for="natureOfWork">Nature of Work:</label>
                <div class="input-group">
                <input type="text" maxlength="15"  class="form-control" id="natureOfWork" name="natureOfWork" title="Please enter your master">
                    <div class="input-group-prepend">
                        <span class="input-group-text">
                            <i class="fa-solid fa-briefcase"></i>
                        </span>
                    </div>
                </div>
                <input type="hidden" class="form-control" id="natureOfWork_id" name="natureOfWork_id">
            </div>
            <div class="form-group col-md-5 ml-auto" id="similarNatureRow">
                <label for="similarNature">Similar Nature:</label>
                <input type="text" maxlength="15"  class="form-control" id="similarNature" name="similarNature">
            </div>
        </div>

        <!-- Period and Tender Value -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="periodRow">
                <label for="period">Period:</label>
                <input type="text" maxlength="15"  class="form-control" id="period" name="period">
            </div>
            <div class="form-group col-md-5 ml-auto" id="tenderValueRow">
                <label for="tenderValue">Tender Value:</label>
                <input type="number" maxlength="15"  class="form-control" id="tenderValue" name="tenderValue">
            </div>
        </div>

        <!-- Value Per Day and Value Per Day in Lacs -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="valuePerDayRow">
                <label for="perDay">Value Per Day:</label>
                <input type="number" maxlength="15"  class="form-control" id="perDay" name="perDay">
            </div>
            <div class="form-group col-md-5 ml-auto" id="PerDayLacsRow">
                <label for="perDayInLac">Value Per Day in Lacs:</label>
                <input type="number" maxlength="15"  class="form-control" id="perDayInLac" name="perDayInLac">
            </div>
        </div>

        <!-- Tender Fees Section -->
        <h4 class="mt-4" id="tenderFeesHeader">Tender Fees</h4>
        <!-- Amount and Exempted for us -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="tenderAmountRow">
                <label for="tenderAmount">Amount:</label>
                <input type="number" maxlength="15"  class="form-control" id="tenderAmount" name="tenderAmount">
            </div>
            <div class="form-group col-md-5 ml-auto" id="tenderExemptedOfUsRow">
                <label for="tenderExemptedOfUs">Exempted for us:</label>
                <select id="tenderExemptedOfUs" name="tenderExemptedOfUs" onchange="toggleExemted(this)" class="form-control">
                    <option value="">Select</option>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>
            </div>
        </div>

        <!-- Mode of Payment for Tender Fees -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="tenderModeOFPaymentRow" style="display:none;" >
                <label for="tenderModeOFPayment">Mode of Payment:</label>
                <select id="tenderModeOFPayment" name="tenderModeOFPayment" class="form-control" onchange="toggleTenderFeePaymentFields()">
                    <option value="">Select Mode</option>
                    <option value="fdr">FDR/DD/BG</option>
                    <option value="paymentGateway">Payment Gateway</option>
                    <option value="rtgs">RTGS/NEFT/IMPS</option>
                </select>
            </div>
        </div>

        <!-- Conditional Fields for Tender Fees -->
        <div id="tenderFeePaymentFields" class="mb-3">
            <!-- FDR/DD/BG Fields -->
            <div id="fdrFields" class="conditional-field" style="display:none;">
                <div class="form-row mb-3" >
                    <div class="form-group col-md-5" id="tenderInFavourOFRow">
                        <label for="tenderInFavourOF">In Favour Of:</label>
                        <input type="text" maxlength="15"  class="form-control" id="tenderInFavourOF" name="tenderInFavourOF">
                    </div>
                    <div class="form-group col-md-5 ml-auto" id="tenderPayableAtRow">
                        <label for="tenderPayableAt">Payable At:</label>
                        <input type="text" maxlength="15"  class="form-control" id="tenderPayableAt" name="tenderPayableAt">
                    </div>
                </div>
                <div class="form-row mb-3" >
                    <div class="form-group col-md-5" id="tenderValidityRow">
                        <label for="tenderValidity">Validity:</label>
                        <input type="text" maxlength="15"  class="form-control" id="tenderValidity" name="tenderValidity">
                    </div>
                </div>
            </div>

            <!-- Payment Gateway Field -->
            <div id="paymentGatewayField" class="conditional-field" style="display:none;">
                <div class="form-row mb-3" id="tenderPortalNameRow">
                    <div class="form-group col-md-5">
                        <label for="tenderPortalName">Portal Name:</label>
                        <input type="text" maxlength="15"  class="form-control" id="tenderPortalName" name="tenderPortalName">
                    </div>
                </div>
            </div>

            <!-- RTGS/NEFT/IMPS Fields -->
            <div id="tendertgsFieldsAC" class="conditional-field" style="display:none;">
                <div class="form-row mb-3" >
                    <div class="form-group col-md-5" id="tenderAccountDetailACNoRow">
                        <label for="tenderAccountDetailACNo">Account Details (A/C No):</label>
                        <input type="text" maxlength="15"  class="form-control" id="tenderAccountDetailACNo" name="tenderAccountDetailACNo">
                    </div>
                </div>
            </div>
            <div id="tenderrtgsFieldsIFSC" class="conditional-field" style="display:none;">
                <div class="form-row mb-3" id="tenderAccountDetailIFSCRow">
                    <div class="form-group col-md-5">
                        <label for="tenderAccountDetailIFSC">Account Details (IFSC):</label>
                        <input type="text" maxlength="15"  class="form-control" id="tenderAccountDetailIFSC" name="tenderAccountDetailIFSC">
                    </div>
                </div>
            </div>
        </div>

        <!-- Processing Fees Section -->
        <h4 class="mt-4" id="processingFeesHeader">Processing Fees</h4>
        <!-- Amount and Exempted for us -->
        <div class="form-row mb-3">
            <div class="form-group col-md-5" id="processingAmountRow">
                <label for="processingAmount">Amount:</label>
                <input type="number" maxlength="15"  class="form-control" id="processingAmount" name="processingAmount">
            </div>
            <div class="form-group col-md-5 ml-auto" id="processingExemptedOfUsRow">
                <label for="processingExemptedOfUs">Exempted for us:</label>
                <select id="processingExemptedOfUs" name="processingExemptedOfUs" onchange="toggleExemted(this)" class="form-control">
                    <option value="">Select</option>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>
            </div>
        </div>

        <!-- Mode of Payment for Processing Fees -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="processingModeOFPaymentRow" style="display:none;">
                <label for="processingModeOFPayment">Mode of Payment:</label>
                <select id="processingModeOFPayment" name="processingModeOFPayment" class="form-control" onchange="toggleProcessingFeePaymentFields()">
                    <option value="">Select Mode</option>
                    <option value="fdr">FDR/DD/BG</option>
                    <option value="paymentGateway">Payment Gateway</option>
                    <option value="rtgs">RTGS/NEFT/IMPS</option>
                </select>
            </div>
        </div>

        <!-- Conditional Fields for Processing Fees -->
        <div id="processingFeePaymentFields" class="mb-3">
            <!-- FDR/DD/BG Fields -->
            <div id="processingfdrFields" class="conditional-field" style="display:none;">
                <div class="form-row mb-3" >       \
                    <div class="form-group col-md-5" id="processingInFavourOFRow">
                        <label for="processingInFavourOF">In Favour Of:</label>
                        <input type="text" maxlength="15"  class="form-control" id="processingInFavourOF" name="processingInFavourOF">
                    </div>
                    <div class="form-group col-md-5 ml-auto" id="processingPayableAtRow">
                        <label for="processingPayableAt">Payable At:</label>
                        <input type="text" maxlength="15"  class="form-control" id="processingPayableAt" name="processingPayableAt">
                    </div>
                </div>
                <div class="form-row mb-3" >
                    <div class="form-group col-md-5" id="processingPalidityRow">
                        <label for="processingPalidity">Validity:</label>
                        <input type="text" maxlength="15"  class="form-control" id="processingPalidity" name="processingPalidity">
                    </div>
                </div>
            </div>

            <!-- Payment Gateway Field -->
            <div id="processingpaymentGatewayField" class="conditional-field" style="display:none;">
                <div class="form-row mb-3" >
                    <div class="form-group col-md-5" id="processingPortalNameRow">
                        <label for="processingPortalName">Portal Name:</label>
                        <input type="text" maxlength="15"  class="form-control" id="processingPortalName" name="processingPortalName">
                    </div>
                </div>
            </div>

            <!-- RTGS/NEFT/IMPS Fields -->
            <div id="processingrtgsFieldsAC" class="conditional-field" style="display:none;">
                <div class="form-row mb-3" >
                    <div class="form-group col-md-5" id="processingAccountDetailACNoRow">
                        <label for="processingAccountDetailACNo">Account Details (A/C No):</label>
                        <input type="text" maxlength="15"  class="form-control" id="processingAccountDetailACNo" name="processingAccountDetailACNo">
                    </div>
                </div>
            </div>
            <div id="processingrtgsFieldsIFSC" class="conditional-field" style="display:none;">
                <div class="form-row mb-3" >
                    <div class="form-group col-md-5" id="processingAccountDetailIFSCRow">
                        <label for="processingAccountDetailIFSC">Account Details (IFSC):</label>
                        <input type="text" maxlength="11"  class="form-control" id="processingAccountDetailIFSC" name="processingAccountDetailIFSC">
                    </div>
                </div>
            </div>
        </div>

        <!-- EMD Section -->
        <h4 class="mt-4" id="emdHeader">EMD</h4>
        <!-- Amount and Exempted for us -->
        <div class="form-row mb-3">
            <div class="form-group col-md-5"  id="emdAmountRow">
                <label for="emdAmount">Amount:</label>
                <input type="number" maxlength="15"  class="form-control" id="emdAmount" name="emdAmount">
            </div>
            <div class="form-group col-md-5 ml-auto" id="emdExemptedOfUsRow">
                <label for="emdExemptedOfUs">Exempted for us:</label>
                <select id="emdExemptedOfUs" name="emdExemptedOfUs" onchange="toggleExemted(this)" class="form-control">
                    <option value="">Select</option>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>
            </div>
        </div>

        <!-- Mode of Payment for EMD -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="emdModeOFPaymentRow" style="display:none;">
                <label for="emdModeOFPayment">Mode of Payment:</label>
                <select id="emdModeOFPayment" name="emdModeOFPayment" class="form-control" onchange="toggleEmdPaymentFields()">
                    <option value="">Select Mode</option>
                    <option value="fdr">FDR/DD/BG</option>
                    <option value="paymentGateway">Payment Gateway</option>
                    <option value="rtgs">RTGS/NEFT/IMPS</option>
                </select>
            </div>
        </div>

        <!-- Conditional Fields for EMD -->
        <div id="emdPaymentFields" class="mb-3">
            <!-- FDR/DD/BG Fields -->
            <div id="EmdfdrFields" class="conditional-field" style="display:none;">
                <div class="form-row mb-3" >
                    <div class="form-group col-md-5" id="emdInFavourOFRow">
                        <label for="emdInFavourOF">In Favour Of:</label>
                        <input type="text" maxlength="15"  class="form-control" id="emdInFavourOF" name="emdInFavourOF">
                    </div>
                    <div class="form-group col-md-5 ml-auto" id="emdPayableAtRow">
                        <label for="emdPayableAt">Payable At:</label>
                        <input type="text" maxlength="15"  class="form-control" id="emdPayableAt" name="emdPayableAt">
                    </div>
                </div>
                <div class="form-row mb-3" >
                    <div class="form-group col-md-5" id="emdValidityRow">
                        <label for="emdValidity">Validity:</label>
                        <input type="text" maxlength="15"  class="form-control" id="emdValidity" name="emdValidity">
                    </div>
                </div>
            </div>

            <!-- Payment Gateway Field -->
            <div id="EMDpaymentGatewayField" class="conditional-field" style="display:none;">
                <div class="form-row mb-3" >
                    <div class="form-group col-md-5" id="emdPortalNameRow">
                        <label for="emdPortalName">Portal Name:</label>
                        <input type="text" maxlength="15"  class="form-control" id="emdPortalName" name="emdPortalName">
                    </div>
                </div>
            </div>

            <!-- RTGS/NEFT/IMPS Fields -->
            <div id="EMDtgsFieldsAC" class="conditional-field" style="display:none;">
                <div class="form-row mb-3" >
                    <div class="form-group col-md-5" id="emdAccountDetailACNoRow">
                        <label for="emdAccountDetailACNo">Account Details (A/C No):</label>
                        <input type="text" maxlength="15"  class="form-control" id="emdAccountDetailACNo" name="emdAccountDetailACNo">
                    </div>
                </div>
            </div>
            <div id="EMDrtgsFieldsIFSC" class="conditional-field" style="display:none;">
                <div class="form-row mb-3" >
                    <div class="form-group col-md-5" id="emdAccountDetailIFSCRow">
                        <label for="emdAccountDetailIFSC">Account Details (IFSC):</label>
                        <input type="text" maxlength="15"  class="form-control" id="emdAccountDetailIFSC" name="emdAccountDetailIFSC">
                    </div>
                </div>
            </div>
        </div>

        <!-- Based On, Area, Penalty Clause -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5"  id="basedOnAreaRow">
                <label for="basedOn">Based On:</label>
                <input type="text" maxlength="15"  class="form-control" id="basedOn" name="basedOn">
            </div>
            <div class="form-group col-md-5 ml-auto" id="AreaRow">
                <label for="Area">Area (in Sq ft):</label>
                <input type="number" maxlength="15"  class="form-control" id="Area" name="Area">
            </div>
        </div>

        <!-- Penalty Clause -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="penaltyClauseRow">
                <label for="penaltyClause">Penalty Clause:</label>
                <input type="text" maxlength="15"  class="form-control" id="penaltyClause" name="penaltyClause">
            </div>
        </div>

        <!-- In Case of Multiple L1 Selection based on, PBG (%) -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="sectionBasedOnRow">
                <label for="sectionBasedOn">In Case of Multiple L1 Selection based on:</label>
                <input type="text" maxlength="15"  class="form-control" id="sectionBasedOn" name="sectionBasedOn">
            </div>
            <div class="form-group col-md-5 ml-auto" id="PBGRow">
                <label for="PBG">PBG (%):</label>
                <input type="number" maxlength="15"  class="form-control" id="PBG" name="PBG">
            </div>
        </div>

        <!-- Rates Quoted in and Service Charge (%) -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="ratesQuotedInRow">
                <label for="ratesQuotedIn">Rates Quoted in:</label>
                <select id="ratesQuotedIn" name="ratesQuotedIn" class="form-control">
                    <option value="">Select</option>
                    <!-- Add options from Master data -->
                    <option value="serviceCharge">Service Charge</option>
                    <!-- Other options -->
                </select>
            </div>
            <div class="form-group col-md-5 ml-auto" id="serviceChargeRow">
                <label for="serviceCharge">Service Charge (%):</label>
                <input type="number" maxlength="15"  class="form-control" id="serviceCharge" name="serviceCharge">
            </div>
        </div>

        <!-- Tender Contact Details -->
        <h4 class="mt-4" id="tenderContactDetailsHeader">Tender Contact Details</h4>
        <!-- Name, Email ID, Contact No. -->
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="tenderContactNameRow">
                <label for="tenderContactName">Name:</label>
                <input type="text" maxlength="15"  class="form-control" id="tenderContactName" name="tenderContactName">
            </div>
            <div class="form-group col-md-5 ml-auto" id="tenderContactEmailRow">
                <label for="tenderContactEmail">Email ID:</label>
                <input type="email" maxlength="50"  class="form-control" id="tenderContactEmail" name="tenderContactEmail">
            </div>
        </div>
        <div class="form-row mb-3" >
            <div class="form-group col-md-5" id="tenderContactContactRow">
                <label for="tenderContactContact">Contact No.:</label>
                <input type="text" maxlength="15"  class="form-control" id="tenderContactContact" name="tenderContactContact">
            </div>
        </div>

        <!-- Upload Section -->
        <h4 class="mt-4" id="uploadHeader">Upload</h4>
        <!-- Upload Tender Document, Check List, EMD Format, Annexures -->
        <div class="form-group" id="tenderDocumentRow">
            <label for="tenderDocument">Upload Tender Document:</label>
            <input type="file" class="form-control-file" id="tenderDocument" name="tenderDocument">
        </div>
        <div class="form-group" id="checkListRow">
            <label for="checkList">Upload Check List:</label>
            <input type="file" class="form-control-file" id="checkList" name="checkList">
        </div>
        <div class="form-group" id="emdFormatRow">
            <label for="emdFormat">Upload EMD Format:</label>
            <input type="file" class="form-control-file" id="emdFormat" name="emdFormat">
        </div>
        <div class="form-group" id="annexuresRow">
            <label for="annexures">Annexures:</label>
            <input type="file" class="form-control-file" id="annexures" name="annexures">
        </div>

        <!-- Upload Supporting Documents -->
        <div class="form-group" id="supportingDocsRow">
            <label for="supportingDocs">Upload Supporting Documents:</label>
            <input type="file" class="form-control-file" id="supportingDocs" name="supportingDocs" multiple />
        </div>

        <div class="row d-flex ">
            <div class="text-center">
                <button type="submit" class="btn btn-primary mr-2">Submit</button>
                <button type="reset" class="btn btn-secondary" th:data-url="${cancelUrl}"
                        onclick="navigateToUrl(this)">Cancel</button>
            </div>
        </div>

    </form>
</div>


<!-- JavaScript to handle component visibility -->
<script>

    function navigateToUrl(button) {
         const url = button.getAttribute('data-url');
         if (url) {
             window.location.href = url;
         }
     }


   document.addEventListener("DOMContentLoaded", function () {
       fetch('/api/component-visibility/entry')
           .then(response => response.json())
           .then(data => {
               // data is an array of component objects
               data.forEach(component => {
                   const componentName = component.componentName;
                   const isVisible = component.visible;

                   // Assuming that each component row has an ID in the format componentName + 'Row'
                   const element = document.getElementById(componentName + 'Row');
                   if (element) {
                       if (isVisible) {
                           element.style.display = 'block'; // or 'block' depending on your layout
                       } else {
                           element.style.display = 'none';
                       }
                   }
               });
           })
           .catch(error => console.error('Error fetching component visibility:', error));
   });

   function toggleExemted(that){
         const status = that.value;
         const componentid= that.id.split("ExemptedOfUs")[0];
       const Exempted = document.getElementById(componentid+'ModeOFPaymentRow');

       if (status === '1') {
       Exempted.style.display = 'none';
           }
   else if(status === '0'){
    Exempted.style.display = 'block';
   }


}

   // JavaScript functions to handle Mode of Payment field changes
   function toggleTenderFeePaymentFields() {
       const modeOfPayment = document.getElementById('tenderModeOFPayment').value;

       // Get all the conditional fields
       const fdrFields = document.getElementById('fdrFields');
       const paymentGatewayField = document.getElementById('paymentGatewayField');
       const rtgsFieldsAC = document.getElementById('tendertgsFieldsAC');
       const rtgsFieldsIFSC = document.getElementById('tenderrtgsFieldsIFSC');

       // Hide all conditional fields
       fdrFields.style.display = 'none';
       paymentGatewayField.style.display = 'none';
       rtgsFieldsAC.style.display = 'none';
       rtgsFieldsIFSC.style.display = 'none';

       // Show the appropriate fields based on the selected mode of payment
       if (modeOfPayment === 'fdr') {
           fdrFields.style.display = 'block';
       } else if (modeOfPayment === 'paymentGateway') {
           paymentGatewayField.style.display = 'block';
       } else if (modeOfPayment === 'rtgs') {
           rtgsFieldsAC.style.display = 'block';
           rtgsFieldsIFSC.style.display = 'block';
       }
   }

   function toggleProcessingFeePaymentFields() {
       const modeOfPayment = document.getElementById('processingModeOFPayment').value;

       // Get all the conditional fields
       const fdrFields = document.getElementById('processingfdrFields');
       const paymentGatewayField = document.getElementById('processingpaymentGatewayField');
       const rtgsFieldsAC = document.getElementById('processingrtgsFieldsAC');
       const rtgsFieldsIFSC = document.getElementById('processingrtgsFieldsIFSC');

       // Hide all conditional fields
       fdrFields.style.display = 'none';
       paymentGatewayField.style.display = 'none';
       rtgsFieldsAC.style.display = 'none';
       rtgsFieldsIFSC.style.display = 'none';

       // Show the appropriate fields based on the selected mode of payment
       if (modeOfPayment === 'fdr') {
           fdrFields.style.display = 'block';
       } else if (modeOfPayment === 'paymentGateway') {
           paymentGatewayField.style.display = 'block';
       } else if (modeOfPayment === 'rtgs') {
           rtgsFieldsAC.style.display = 'block';
           rtgsFieldsIFSC.style.display = 'block';
       }
   }

   function toggleEmdPaymentFields() {
   debugger;
       const modeOfPayment = document.getElementById('emdModeOFPayment').value;

       // Get all the conditional fields
       const fdrFields = document.getElementById('EmdfdrFields');
       const paymentGatewayField = document.getElementById('EMDpaymentGatewayField');
       const rtgsFieldsAC = document.getElementById('EMDtgsFieldsAC');
       const rtgsFieldsIFSC = document.getElementById('EMDrtgsFieldsIFSC');

       // Hide all conditional fields
       fdrFields.style.display = 'none';
       paymentGatewayField.style.display = 'none';
       rtgsFieldsAC.style.display = 'none';
       rtgsFieldsIFSC.style.display = 'none';

       // Show the appropriate fields based on the selected mode of payment
       if (modeOfPayment === 'fdr') {
           fdrFields.style.display = 'block';
       } else if (modeOfPayment === 'paymentGateway') {
           paymentGatewayField.style.display = 'block';
       } else if (modeOfPayment === 'rtgs') {
           rtgsFieldsAC.style.display = 'block';
           rtgsFieldsIFSC.style.display = 'block';
       }
   }


$("#zone").autocomplete({
       source: function(request, response) {
           $.ajax({
               url: "/searchAllZone",
               data: { query: request.term },
               success: function(data) {
                   response(data.map(item => ({
                       label: item.supplier,
                       value: item.suplierId
                   })));
               }
           });
       },
       minLength: 2,
       select: function(event, ui) {
           $("#zone").val(ui.item.label);
           $("#zone_id").val(ui.item.value);
           return false;
       }
   });



 <!--deprtment-->
$("#department").autocomplete({
       source: function(request, response) {
           $.ajax({
               url: "/searchAllDepartment",
               data: { query: request.term },
               success: function(data) {
                   response(data.map(item => ({
                       label: item.supplier,
                       value: item.suplierId
                   })));
               }
           });
       },
       minLength: 2,
       select: function(event, ui) {
           $("#department").val(ui.item.label);
           $("#department_id").val(ui.item.value);
           return false;
       }
   });





   <!--state-->
   $("#state").autocomplete({
       source: function(request, response) {
           $.ajax({
               url: "/searchAllstate",
               data: { query: request.term },
               success: function(data) {
                   response(data.map(item => ({
                       label: item.supplier,
                       value: item.suplierId
                   })));
               }
           });
       },
       minLength: 2,
       select: function(event, ui) {
           $("#state").val(ui.item.label);
           $("#state_id").val(ui.item.value);
           return false;
       }
   });



<!--client-->

$("#clientName").autocomplete({
       source: function(request, response) {
           $.ajax({
               url: "/searchAssupmstDetails",
               data: { query: request.term },
               success: function(data) {
                   response(data.map(item => ({
                       label: item.supplier,
                       value: item.suplierId
                   })));
               }
           });
       },
       minLength: 2,
       select: function(event, ui) {
           $("#clientName").val(ui.item.label);
           $("#clientName_id").val(ui.item.value);
           return false;
       }
   });






   <!--division-->
$("#division").autocomplete({
       source: function(request, response) {
           $.ajax({
               url: "/searchDivisionData",
               data: { query: request.term },
               success: function(data) {
                   response(data.map(item => ({
                       label: item.supplier,
                       value: item.suplierId
                   })));
               }
           });
       },
       minLength: 2,
       select: function(event, ui) {
           $("#division").val(ui.item.label);
           $("#division_id").val(ui.item.value);
           return false;
       }
   });


   <!--operational branch-->

$("#operationalBranch").autocomplete({
       source: function(request, response) {
           $.ajax({
               url: "/searchBranchData",
               data: { query: request.term },
               success: function(data) {
                   response(data.map(item => ({
                       label: item.supplier,
                       value: item.suplierId
                   })));
               }
           });
       },
       minLength: 2,
       select: function(event, ui) {
           $("#operationalBranch").val(ui.item.label);
           $("#operationalBranch_id").val(ui.item.value);
           return false;
       }
   });





   <!--nature of work-->

$("#natureOfWork").autocomplete({
       source: function(request, response) {
           $.ajax({
               url: "/searchNatureOfWork",
               data: { query: request.term },
               success: function(data) {
                   response(data.map(item => ({
                       label: item.supplier,
                       value: item.suplierId
                   })));
               }
           });
       },
       minLength: 2,
       select: function(event, ui) {
           $("#natureOfWork").val(ui.item.label);
           $("#natureOfWork_Id").val(ui.item.value);
           return false;
       }
   });


   function updateParticipatingMonth() {
       const submissionDate = document.getElementById('submissionDate').value;
       const participatingMonthSelect = document.getElementById('participatingMonth');

       if (submissionDate) {
           // Extract the month from the submission date
           const date = new Date(submissionDate);
           const month = date.toLocaleString('default', { month: 'long' });

           // Set the participating month based on the extracted month
           for (let i = 0; i < participatingMonthSelect.options.length; i++) {
               if (participatingMonthSelect.options[i].text === month) {
                   participatingMonthSelect.selectedIndex = i;
                   break;
               }
           }
       } else {
           participatingMonthSelect.selectedIndex = 0; // Default to "Select Month"
       }
   }

   document.addEventListener("DOMContentLoaded", function () {
       // Attach event listeners for date validation
       document.getElementById("submissionDate").addEventListener("change", validateDates);
       document.getElementById("bidPublishDate").addEventListener("change", validateDates);
       document.getElementById("extendedDate").addEventListener("change", validateDates);
       document.getElementById("searchDate").addEventListener("change", validateDates);
        document.getElementById("bidValidity").addEventListener("change", validateDates);


       // Form submission validation
       document.querySelector("form").onsubmit = function(event) {
           if (!validateDates()) {
               event.preventDefault();
           }
       };
   });

   function validateDates() {
       const bidPublishDate = new Date(document.getElementById("bidPublishDate").value);
       const submissionDate = new Date(document.getElementById("submissionDate").value);
       const extendedDate = new Date(document.getElementById("extendedDate").value);
       const searchDate = new Date(document.getElementById("searchDate").value);
       const bidValidityDate = new Date(document.getElementById("bidValidity").value);
        const gDate = new Date(document.getElementById("gdate").value);

       let isValid = true;
       let errorMessage = "";

       // Check if Bid Publish Date is less than Submission Date
       if (bidPublishDate >= submissionDate) {
           errorMessage += "Bid Publish Date should be earlier than Submission Date.\n";
           isValid = false;
       }

       // Check if Extended Date is greater than Submission Date
       if (extendedDate <= submissionDate) {
           errorMessage += "Extended Date should be later than Submission Date.\n";
           isValid = false;
       }
       // Check if Bid Publish Date is greater than Search Date
        if (bidPublishDate >= searchDate) {
           errorMessage += "Search Date should be later than Bid Publish Date.\n";
           isValid = false;
       }
       // Check if Bid Validity Date is greater than Submission Date and Extended Date
   if (bidValidityDate <= submissionDate) {
       errorMessage += "Bid Validity Date should be later than Submission Date.\n";
       isValid = false;
   }
   if (extendedDate && bidValidityDate <= extendedDate) {
       errorMessage += "Bid Validity Date should be later than Extended Date.\n";
       isValid = false;
   }

       // **New Checks for G Date**

   // Check if Submission Date is greater than G Date
   if (submissionDate > gDate) {
       errorMessage += "Submission Date should not be later than current Date.\n";
       isValid = false;
   }

   // Check if Extended Date is greater than G Date
   if (extendedDate && extendedDate > gDate) {
       errorMessage += "Extended Date should not be later than current Date.\n";
       isValid = false;
   }

       if (!isValid) {
           alert(errorMessage); // Display the error message
       }
       return isValid;
   }




</script>

<!-- Bootstrap JS and dependencies -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>


</body>
</html>
